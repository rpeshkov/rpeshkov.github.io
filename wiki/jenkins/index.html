<!doctype html>
<html lang="en-us">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.88.1" />

    
        <title>Jenkins &middot; Roman Peshkov</title>

    

    <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Mono|Merriweather:400,400i,700" rel="stylesheet">






<link rel="stylesheet" href="/styles/main.css">

    

    <meta name="twitter:title" content="Jenkins"/>
<meta name="twitter:description" content="Jenkinsfile A Jenkinsfile is a text file that contains the definition of a Jenkins Pipeline and is checked into source control.
Sample Jenkinsfile for Angular application. Taken from here
pipeline{ agent { label &#39;nodejs8&#39; } stages{ stage (&#39;checkout&#39;){ steps{ checkout scm } } stage (&#39;install modules&#39;){ steps{ sh &#39;&#39;&#39; npm install --verbose -d npm install --save classlist.js &#39;&#39;&#39; } } stage (&#39;test&#39;){ steps{ sh &#39;&#39;&#39; $(npm bin)/ng test --single-run --browsers Chrome_no_sandbox &#39;&#39;&#39; } post { always { junit &#34;test-results."/>
<meta name="twitter:card" content="summary"/>

<meta name="twitter:site" content="@rpeshkov"/>
    <meta name="twitter:creator" content="@rpeshkov"/>

</head>

<body>
    <header class="header">
        <div class="wrapper">
            <a href="/" class="logo">
    <div>Roman Peshkov</div>
    <small>developer, geek, workaholic</small>
</a>


            <nav class="navigation">
                <ul class="navigation__menu">
    
    
        <li class="navigation__item">
            <a href="/blog/"
            class="navigation__link"
            title="Blog">Blog</a>
        </li>
    
        <li class="navigation__item">
            <a href="/wiki/"
            class="navigation__link"
            title="Wiki">Wiki</a>
        </li>
    
        <li class="navigation__item">
            <a href="/links/"
            class="navigation__link"
            title="Links">Links</a>
        </li>
    
        <li class="navigation__item">
            <a href="/index.xml"
            class="navigation__link"
            title="RSS">RSS</a>
        </li>
    
</ul>

            </nav>
        </div>
    </header>


<div class="wrapper content-container">
    <main class="content">
        <h1>Jenkins</h1>
        <div class="meta font_small">
            Posted on
            
                <time datetime="2019-01-29">Jan 29, 2019</time>
            
            in
            
                
                    <a href="/tags/ci">#ci</a>
                
                    <a href="/tags/jenkins">#jenkins</a>
                
            
        </div>

        <h2 id="jenkinsfile">Jenkinsfile</h2>
<p>A <code>Jenkinsfile</code> is a text file that contains the definition of a Jenkins Pipeline and is checked into source control.</p>
<p>Sample <code>Jenkinsfile</code> for Angular application. Taken from <a href="https://github.com/petenorth/angular-5-example">here</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-groovy" data-lang="groovy">pipeline<span style="color:#ff79c6">{</span>
  agent <span style="color:#ff79c6">{</span> label <span style="color:#f1fa8c">&#39;nodejs8&#39;</span> <span style="color:#ff79c6">}</span>
  stages<span style="color:#ff79c6">{</span>
    stage <span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#39;checkout&#39;</span><span style="color:#ff79c6">){</span>
      steps<span style="color:#ff79c6">{</span>
        checkout scm
      <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>
    stage <span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#39;install modules&#39;</span><span style="color:#ff79c6">){</span>
      steps<span style="color:#ff79c6">{</span>
        sh <span style="color:#f1fa8c">&#39;&#39;&#39;
</span><span style="color:#f1fa8c">          npm install --verbose -d
</span><span style="color:#f1fa8c">          npm install --save classlist.js
</span><span style="color:#f1fa8c">        &#39;&#39;&#39;</span>
      <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>
    stage <span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#39;test&#39;</span><span style="color:#ff79c6">){</span>
      steps<span style="color:#ff79c6">{</span>
        sh <span style="color:#f1fa8c">&#39;&#39;&#39;
</span><span style="color:#f1fa8c">          $(npm bin)/ng test --single-run --browsers Chrome_no_sandbox
</span><span style="color:#f1fa8c">        &#39;&#39;&#39;</span>
      <span style="color:#ff79c6">}</span>
      post <span style="color:#ff79c6">{</span>
          always <span style="color:#ff79c6">{</span>
            junit <span style="color:#f1fa8c">&#34;test-results.xml&#34;</span>
          <span style="color:#ff79c6">}</span>
      <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>
    stage <span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#39;code quality&#39;</span><span style="color:#ff79c6">){</span>
      steps<span style="color:#ff79c6">{</span>
        sh <span style="color:#f1fa8c">&#39;$(npm bin)/ng lint&#39;</span>
      <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>
    stage <span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#39;build&#39;</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
      steps<span style="color:#ff79c6">{</span>
        sh <span style="color:#f1fa8c">&#39;$(npm bin)/ng build --prod --build-optimizer&#39;</span>
      <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>
    stage <span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#39;build image&#39;</span><span style="color:#ff79c6">)</span> <span style="color:#ff79c6">{</span>
      steps<span style="color:#ff79c6">{</span>
        sh <span style="color:#f1fa8c">&#39;&#39;&#39;
</span><span style="color:#f1fa8c">          rm -rf node_modules
</span><span style="color:#f1fa8c">          oc start-build angular-5-example --from-dir=. --follow
</span><span style="color:#f1fa8c">        &#39;&#39;&#39;</span>
      <span style="color:#ff79c6">}</span>
    <span style="color:#ff79c6">}</span>
  <span style="color:#ff79c6">}</span>
<span style="color:#ff79c6">}</span>
</code></pre></div><h3 id="links">Links</h3>
<ul>
<li><a href="https://jenkins.io/doc/book/pipeline/jenkinsfile/">Using a Jenkinsfile</a></li>
<li><a href="https://antonyderham.me/post/jenkins-docker-pipelines/">Declarative Jenkins Docker Pipeline for Angular CLI applications</a></li>
</ul>


        
    </main>
</div>

<footer class="footer">Copyright &copy; 2021 Roman Peshkov</footer>
</body>
</html>

